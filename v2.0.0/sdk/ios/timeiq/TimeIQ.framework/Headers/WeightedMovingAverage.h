//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: //com/intel/wearable/platform/timeiq/places/modules/motmodule/algs/WeightedMovingAverage.java
//

#ifndef _WeightedMovingAverage_H_
#define _WeightedMovingAverage_H_

#import "JBQueue.h"

#import "JB.h"

#define WeightedMovingAverage_INVALID_AVERAGE -INFINITY

/**
 @brief class implementing WeightedMovingAverage the implementation keeps updated total-weight and total-sum of all elements while adding new elements.
 Then to return the average sum/weight is calculated Not threadsafe
 */
@interface WeightedMovingAverage : NSObject {
 @public
  JBQueue* m_queue_;
  double m_requiredWeight_;
  double m_totalWeight_;
  double m_sum_;
}

- (instancetype)initWithDouble:(double)requiredWeight;

/**
 @brief addElement first adds the new element to the queue, then removes elements or part of them to keep the totalWeight equal to the required weight
 @param value the value of the element to add
 @param weight the weight of the element to add
 */
- (void)addElementWithDouble:(double)value
                  withDouble:(double)weight;

/**
 @return te average if reached required weight. Double.MIN_VALUE otherwise
 */
- (double)getAverage;

- (void)copyAllFieldsTo:(WeightedMovingAverage *)other;

@end

__attribute__((always_inline)) inline void WeightedMovingAverage_init() {}

//J2OBJC_FIELD_SETTER(WeightedMovingAverage, m_queue_, JBQueue*)

J2OBJC_STATIC_FIELD_GETTER(WeightedMovingAverage, INVALID_AVERAGE, double)

typedef WeightedMovingAverage ComIntelWearablePlatformTimeiqPlacesModulesMotmoduleAlgsWeightedMovingAverage;

/**
 @brief class to hold a single Moving Average element
 */
@interface WeightedMovingAverage_MaElement : NSObject {
 @public
  double m_value_;
  double m_weight_;
}

- (instancetype)initWithDouble:(double)value
                    withDouble:(double)weight;

- (void)copyAllFieldsTo:(WeightedMovingAverage_MaElement *)other;

@end

__attribute__((always_inline)) inline void WeightedMovingAverage_MaElement_init() {}

#endif // _WeightedMovingAverage_H_
